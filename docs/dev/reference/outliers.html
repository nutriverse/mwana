<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Identify, flag outliers and remove them — flag_outliers • mwana</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Identify, flag outliers and remove them — flag_outliers"><meta name="description" content="Identify outlier z-scores for weight-for-height (WFHZ) and MUAC-for-age (MFAZ)
following the SMART methodology. The function can also be used to detect
outliers for height-for-age (HFAZ) and weight-for-age (WFAZ) z-scores
following the same approach.
For raw MUAC values, outliers constitute values that are less than 100
millimeters or greater than 200 millimeters.
Removing outliers consist in setting the outlier record to NA and not necessarily
to delete it from the data set. This is useful in the analysis procedures
where outliers must be removed, such as the analysis of the standard deviation."><meta property="og:description" content="Identify outlier z-scores for weight-for-height (WFHZ) and MUAC-for-age (MFAZ)
following the SMART methodology. The function can also be used to detect
outliers for height-for-age (HFAZ) and weight-for-age (WFAZ) z-scores
following the same approach.
For raw MUAC values, outliers constitute values that are less than 100
millimeters or greater than 200 millimeters.
Removing outliers consist in setting the outlier record to NA and not necessarily
to delete it from the data set. This is useful in the analysis procedures
where outliers must be removed, such as the analysis of the standard deviation."><meta property="og:image" content="https://nutriverse.io/mwana/logo.png"><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-success" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mwana</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.2.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/plausibility.html">Running plausibility checks</a></li>
    <li><a class="dropdown-item" href="../articles/prevalence.html">Estimating the prevalence of wasting</a></li>
    <li><a class="dropdown-item" href="../articles/ipc_amn_check.html">Checking if IPC Acute Malnutrition sample size requirements were met</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://nutriverse.io"><span class="fa globe fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://mastodon.social/@nutriverse"><span class="fa fab fa-mastodon fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/nutriverse/mwana/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Identify, flag outliers and remove them</h1>
      <small class="dont-index">Source: <a href="https://github.com/nutriverse/mwana/blob/HEAD/R/utils.R" class="external-link"><code>R/utils.R</code></a></small>
      <div class="d-none name"><code>outliers.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Identify outlier z-scores for weight-for-height (WFHZ) and MUAC-for-age (MFAZ)
following the SMART methodology. The function can also be used to detect
outliers for height-for-age (HFAZ) and weight-for-age (WFAZ) z-scores
following the same approach.</p>
<p>For raw MUAC values, outliers constitute values that are less than 100
millimeters or greater than 200 millimeters.</p>
<p>Removing outliers consist in setting the outlier record to <code>NA</code> and not necessarily
to delete it from the data set. This is useful in the analysis procedures
where outliers must be removed, such as the analysis of the standard deviation.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">flag_outliers</span><span class="op">(</span><span class="va">x</span>, .from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"zscores"</span>, <span class="st">"raw_muac"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">remove_flags</span><span class="op">(</span><span class="va">x</span>, .from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"zscores"</span>, <span class="st">"raw_muac"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A vector of class <code>numeric</code> of WFHZ, MFAZ, HFAZ, WFAZ or raw MUAC values.
The latter should be in millimeters. If the class is different than expected,
the function will stop execution and return an error message indicating the
type of mismatch.</p></dd>


<dt id="arg--from">.from<a class="anchor" aria-label="anchor" href="#arg--from"></a></dt>
<dd><p>A choice between <code>zscores</code> and <code>raw_muac</code> for where outliers should be
detected and flagged from.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A vector of the same length as <code>x</code> for flagged records coded as
<code>1</code> for is a flag and <code>0</code> not a flag.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>For z-score-based detection, flagged records represent outliers that deviate
substantially from the sample's z-score mean, making them unlikely to reflect
accurate measurements. For raw MUAC values, flagged records are those that fall
outside the acceptable fixed range. Including such outliers in the analysis could
compromise the accuracy and precision of the resulting estimates.</p>
<p>The flagging criterion used for raw MUAC values is based on a recommendation
by Bilukha, O., &amp; Kianian, B. (2023).</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Bilukha, O., &amp; Kianian, B. (2023). Considerations for assessment of measurement
quality of mid‐upper arm circumference data in anthropometric surveys and
mass nutritional screenings conducted in humanitarian and refugee settings.
<em>Maternal &amp; Child Nutrition</em>, 19, e13478. Available at <a href="https://doi.org/10.1111/mcn.13478" class="external-link">https://doi.org/10.1111/mcn.13478</a></p>
<p>SMART Initiative (2017). <em>Standardized Monitoring and Assessment for Relief
and Transition</em>. Manual 2.0. Available at: <a href="https://smartmethodology.org" class="external-link">https://smartmethodology.org</a>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## Sample data of raw MUAC values ----</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">anthro.01</span><span class="op">$</span><span class="va">muac</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Apply the function with `.from` set to "raw_muac" ----</span></span></span>
<span class="r-in"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu">flag_outliers</span><span class="op">(</span><span class="va">x</span>, .from <span class="op">=</span> <span class="st">"raw_muac"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">m</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0 0 0 0 0 0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Sample data of z-scores (be it WFHZ, MFAZ, HFAZ or WFAZ) ----</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">anthro.02</span><span class="op">$</span><span class="va">mfaz</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Apply the function with `.from` set to "zscores" ----</span></span></span>
<span class="r-in"><span><span class="va">z</span> <span class="op">&lt;-</span> <span class="fu">flag_outliers</span><span class="op">(</span><span class="va">x</span>, .from <span class="op">=</span> <span class="st">"zscores"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">z</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0 0 0 0 0 0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## With `.from` set to "zscores" ----</span></span></span>
<span class="r-in"><span><span class="va">z</span> <span class="op">&lt;-</span> <span class="fu">remove_flags</span><span class="op">(</span></span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="va">wfhz.01</span><span class="op">$</span><span class="va">wfhz</span>,</span></span>
<span class="r-in"><span>  .from <span class="op">=</span> <span class="st">"zscores"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">z</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]  1.833  0.278 -0.123  1.442  0.652  0.469</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## With `.from` set to "raw_muac" ----</span></span></span>
<span class="r-in"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu">remove_flags</span><span class="op">(</span></span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="va">mfaz.01</span><span class="op">$</span><span class="va">muac</span>,</span></span>
<span class="r-in"><span>  .from <span class="op">=</span> <span class="st">"raw_muac"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">m</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 146 143 138 153 158 147</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tomás Zaba, Ernest Guevarra.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

